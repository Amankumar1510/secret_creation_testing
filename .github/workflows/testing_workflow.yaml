name: Dynamic Secret Names

on:
  push:
    branch:
      -master
  workflow_dispatch:
    inputs:
      name:
        description: 'Enter the name (aman or akash)'
        required: true

jobs:
  create-secrets:
    runs-on: ubuntu-latest
    env:
      SECRET: ${{ secrets.AKASH_KUMAR }}
    steps:
      - name: Set secret name
        id: set-secret-name
        run: |
          echo "{secret_name} = ${{ github.event.inputs.name }}" >> $GITHUB_OUTPUT
          echo "{secret_name_1} = secrets.${{ github.event.inputs.name }}" >> $GITHUB_OUTPUT

      - name: Create secret
        env:
          SECRET_NAME : ${{ steps.set-secret-name.outputs.secret_name }}
          SECRET_NAME_1 : ${{ steps.set-secret-name.outputs.secret_name_1 }}
        run: |
          echo "Creating secret ${{ steps.set-secret-name.outputs.secret_name }}"
          echo "${{ secrets[steps.set-secret-name.outputs.secret_name] }}"
          echo "${{ secrets."${{ env.SECRET_NAME }}" }}"
          echo "${{ env.SECRET }}"
